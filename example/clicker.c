//14x16
char dwarf11[] = {0x0,0x0,0xd,0xd5,0x0,0x0,0x0,0x0,0x0,0xdd,0x55,0x50,0x0,0x0,0x0,0xd,0xdd,0x55,0x55,0x0,0x0,0x0,0xdd,0xd7,0x11,0x1f,0x50,0x0,0x0,0xd7,0x71,0x41,0x41,0x0,0x0,0x0,0x7,0x71,0x11,0x11,0x0,0x0,0x0,0x7,0x88,0x11,0x88,0x0,0x0,0x0,0x96,0x77,0x44,0x10,0x0,0x0,0x4,0x96,0xaa,0x18,0x8c,0xcf,0x0,0xc,0x46,0xaa,0x88,0xc0,0x80,0xf0,0x9,0xc4,0x6a,0x88,0x66,0x80,0x0,0x9,0x9c,0x66,0xa4,0x0,0x80,0x0,0x9,0x96,0x66,0x64,0x0,0x80,0x0,0x9,0x96,0x66,0x64,0x0,0x0,0x0,0x0,0x90,0x0,0x60,0x0,0x0,0x0,0x0,0xbb,0x0,0xbb,0x0,0x0,0x0};
char dwarf12[] = {0x0,0x0,0x0,0xd5,0x50,0x0,0x0,0x0,0x0,0xd,0x55,0x55,0x0,0x0,0x0,0xd,0xdd,0x55,0x55,0x0,0x0,0x0,0xdd,0xd7,0x11,0x1f,0x50,0x0,0x0,0xd7,0x71,0x41,0x91,0x0,0x0,0x0,0x7,0x81,0x11,0x18,0x0,0x70,0x0,0x77,0x78,0x11,0x81,0x0,0x0,0x0,0x97,0x77,0x44,0x10,0xc0,0x0,0xc,0x96,0xa8,0x18,0x70,0xc,0x7,0xc,0x46,0xa8,0x87,0x0,0x8,0xf0,0xc,0x46,0x6a,0x87,0x66,0x80,0x7f,0xc,0x46,0x66,0xa4,0xa,0x0,0x7,0xc,0x46,0x66,0x64,0xa0,0x0,0x70,0x9,0x96,0x66,0x64,0x0,0xa0,0x0,0xb,0x90,0x6,0x0,0x0,0x0,0x7,0x0,0xb0,0xb,0xb0,0x0,0x0,0x0};
char dwarf21[] = {0x0,0x2,0x20,0x0,0x0,0x0,0x0,0x0,0x22,0x22,0x0,0x0,0x0,0x0,0x2,0x2,0x22,0x20,0x0,0x0,0x0,0x0,0x2,0x22,0x20,0x9,0x99,0x99,0x0,0xa,0xa1,0x10,0x9,0x0,0x9,0x0,0xaa,0x19,0x10,0x0,0x90,0x90,0x0,0xaa,0x11,0x11,0x9,0x99,0x99,0x0,0xa5,0x51,0xa0,0xf,0xfb,0xbb,0x0,0x55,0x5a,0xaa,0x5f,0x99,0xcb,0xd,0x5d,0x55,0xaa,0xf,0xcc,0xbb,0xd,0x55,0xdd,0x5a,0xf,0x99,0xcb,0xd,0xf5,0x55,0xdd,0xdf,0xfc,0xbb,0x0,0xdf,0xf7,0xf5,0x9,0x99,0x99,0x0,0x5,0x55,0x50,0xc,0xff,0xfb,0x0,0x5,0x0,0x50,0x0,0xcf,0xb0,0x0,0x4,0x40,0x44,0x0,0xc,0x0};
char dwarf22[] = {0x2,0x2,0x20,0x0,0x0,0x0,0x0,0x0,0x22,0x22,0x0,0x0,0x0,0x0,0x0,0x2,0x22,0x20,0x9,0x99,0x99,0x0,0x2,0x22,0x20,0x9,0x0,0x9,0x0,0xa,0xa1,0x20,0x0,0x90,0x90,0x0,0xaa,0x19,0x10,0x0,0x90,0x90,0x0,0xaa,0x11,0x71,0x9,0x99,0x99,0xa,0xa5,0x57,0xa0,0xf,0xfb,0xbb,0x5,0x55,0x5a,0xaa,0xf,0x99,0xcb,0xd,0x5d,0x55,0x7a,0x5f,0xcc,0xbb,0xd,0x55,0xdd,0x57,0x7f,0x99,0xcb,0x0,0x55,0x75,0xd5,0x7f,0x7c,0xb7,0x0,0xf,0xf7,0xfd,0x7c,0xc7,0xcc,0x0,0x5,0x55,0x50,0x7,0x6,0x7,0x0,0x5,0x0,0x5,0xc,0xa1,0xab,0x0,0x4,0x40,0x74,0x47,0xca,0xb7};
int dwarf2[] = {dwarf21, dwarf22};
char dwarf31[] = {0x0,0x0,0xbb,0xc0,0x0,0x0,0x0,0x0,0xb,0xbc,0xbc,0x0,0x0,0x0,0x0,0xb,0xcb,0xcc,0xc0,0x0,0x0,0x0,0xb,0xbc,0x11,0x10,0x80,0x0,0x0,0xb,0xcc,0xc1,0xc7,0x8,0x0,0x0,0xb,0xbc,0xc1,0x70,0x0,0x80,0x0,0xb,0xcb,0xc7,0xc0,0x0,0x8,0x0,0x0,0xbc,0xb7,0x0,0x0,0x8,0x0,0xf,0x9f,0xf7,0x90,0x0,0xf,0x0,0x66,0xcc,0xc7,0xff,0xf9,0xf8,0x0,0x9f,0x9f,0xf7,0xf0,0x0,0x8,0x0,0xf9,0xf9,0xff,0x70,0x0,0x80,0x0,0xf,0x9f,0x9f,0xf7,0x8,0x0,0x0,0x0,0xf9,0xf6,0x0,0x80,0x0,0x0,0x0,0x90,0x0,0xf0,0x0,0x0,0x0,0x0,0xf9,0x0,0x9f,0x0,0x0};
char dwarf32[] = {0x0,0x0,0xb,0xcb,0x0,0x0,0x0,0x0,0x0,0xbc,0xbc,0xc0,0x0,0x0,0x0,0x0,0xcb,0xcc,0xcc,0x0,0x80,0xf,0x0,0xbc,0xc1,0x11,0x0,0x78,0xf,0x0,0xcb,0xcc,0x1c,0x0,0x78,0x9,0x0,0xbc,0xcc,0x1c,0x0,0x78,0x0,0xf0,0xb,0xcb,0xcc,0x0,0x78,0x0,0xf0,0xc,0xbf,0x0,0x0,0x78,0x0,0x9f,0x9f,0x9f,0x90,0x0,0x7f,0x0,0x9,0xf9,0xff,0xff,0xf9,0xf8,0x0,0xf,0x9f,0xff,0xf0,0x0,0x78,0x0,0x9,0xf9,0xff,0xf0,0x0,0x78,0x0,0xf,0x9f,0x9f,0x0,0x0,0x78,0x0,0x9,0xf9,0xf6,0x0,0x0,0x78,0x0,0xf,0x0,0xf,0x0,0x0,0x80,0x0,0x9,0xf0,0xf,0x90,0x0,0x0};
int dwarf3[] = {dwarf31, dwarf32};
char chestim[] = {0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0xca,0xca,0xca,0xca,0xc0,0x0,0x9,0xac,0xac,0xac,0xac,0x99,0x0,0x99,0x99,0x99,0x99,0x99,0x88,0x90,0x9,0xbb,0xbb,0xbb,0xbb,0x98,0xa0,0x0,0x9b,0xb4,0xbb,0xbb,0xb9,0x89,0x0,0x9,0xcc,0xc7,0xdc,0xcf,0x99,0x0,0x0,0x9c,0x72,0x77,0xbc,0xfc,0xfc,0x99,0x99,0x99,0x9c,0x99,0x9b,0xca,0x88,0x66,0x88,0x89,0x88,0xb9,0xc8,0xa8,0x44,0x88,0x89,0x88,0x8b,0x98,0x88,0x88,0x88,0x89,0xa7,0x89,0x9a,0x7a,0x8a,0x8a,0x8a,0x77,0x5b,0xa7,0x27,0xa8,0xaa,0xa7,0x37,0x75,0x73,0x73,0x7b,0x9b,0x72,0x75,0x37};

//16x16
char castle[] = {0x0,0x3,0x60,0x0,0x0,0x0,0x0,0x0,0x0,0x33,0x66,0x0,0x0,0xb0,0x0,0x0,0x3,0x33,0x66,0x60,0x9,0xb0,0x0,0x0,0x0,0xcf,0xcc,0x0,0x9,0xbb,0x0,0x0,0x0,0xff,0xcc,0x0,0x9,0xb4,0xb0,0x0,0x1,0xf1,0xfc,0xf0,0x99,0xbb,0xb0,0x0,0x1,0x11,0xff,0xf0,0x99,0xbb,0xb0,0x0,0x1,0xc1,0xfb,0xf0,0x99,0x9b,0xb0,0x0,0x1,0xc1,0xfb,0xf9,0x9c,0x9b,0xdb,0x0,0x1,0x11,0xff,0xc9,0x59,0xcb,0x4b,0x0,0xf,0x11,0xff,0xf9,0x99,0xcb,0xb4,0xb0,0x1,0x81,0xfc,0x99,0x99,0x9b,0xbb,0xb0,0x1,0x89,0x99,0x99,0xc9,0x99,0xbd,0xb0,0xf,0x99,0x59,0x9c,0x99,0x59,0xb4,0xbb,0x9,0x95,0x55,0xc9,0x99,0xc5,0x9b,0x4b,0x99,0x59,0x9c,0x99,0x99,0x9c,0x9b,0xbb};

//16x16rle
char earth1[] = {0x8,0xaa,0x93,0x66,0x6a,0x66,0x6a,0x66,0x6a,0x66,0x6a,0x66,0xa6,0x66,0xa6,0x66,0xa6,0x66,0xa6,0x66,0x6c,0x8,0x66,0x84,0x6b,0x66,0xc6,0x9,0x66,0x82,0xb6,0x2,0x66,0x5,0x96,0x84,0x6e,0x66,0x96,0x5,0x69,0x85,0x66,0x96,0x69,0x96,0x6,0x99,0x82,0x9c,0x2,0x99,0x84,0x79,0x99,0x9c,0x4,0x99,0x88,0x9c,0x99,0xb9,0x99,0x9b,0x99,0x9b,0x4,0x99,0x82,0x92,0x4,0x99,0x85,0x9,0x9b,0x99,0xc9,0x2,0x99,0x82,0x9,0x5,0x99,0x2,0x9,0x2,0x90,0x3,0x99,0x3,0x90,0x8,0x9};
char earth2[] = {0x83,0x0,0x40,0x2,0x0,0x87,0x4,0x0,0x4,0x0,0xb4,0x4,0x2,0x0,0x3,0x40,0x83,0x4b,0xbb,0x2,0x40,0x2,0x4,0x8d,0xb4,0x4,0xb,0xcb,0xbb,0x4,0x40,0x4b,0xcb,0x40,0xbc,0x6c,0x3,0xbb,0x91,0xbc,0x6c,0xbb,0xc6,0x66,0xcb,0xbb,0xcc,0xc6,0x66,0xcc,0x66,0x6d,0x6c,0xcc,0x63,0xa,0x66,0x82,0x6d,0x2,0x66,0x82,0xf6,0x3,0x66,0x82,0xf6,0x3,0x66,0x82,0x36,0x4,0x66,0x82,0x36,0x4,0x66,0x82,0xd6,0x3,0x66,0x84,0xf6,0x66,0x6a,0x3,0x66,0x82,0x6a,0x2,0x66,0x88,0xd6,0x66,0x6f,0x66,0xa6,0x66,0x6a,0x2,0x66,0x88,0xa6,0x66,0xa6,0x66,0x6a,0xa6,0x66,0x10,0xaa};
//16x16
char block1[] = {0x66,0xcc,0xcc,0xcf,0xfc,0xfc,0x1c,0x66,0x6c,0xcb,0xcf,0xff,0xff,0xff,0xcf,0xc6,0xcc,0xfc,0xfc,0xff,0xcf,0xfc,0xcc,0xfc,0xc1,0xcf,0xcf,0xff,0xfc,0xff,0xcf,0xc1,0xcc,0xfc,0xff,0xff,0xff,0xcf,0xff,0xfc,0xcf,0xff,0xff,0x1c,0xff,0xfc,0xff,0xcf,0xbc,0xff,0xf1,0xcc,0xbf,0xff,0xcb,0xfc,0xcf,0xff,0x1c,0xbb,0xff,0xff,0xcb,0xff,0xff,0xcc,0xcb,0xff,0xff,0xf1,0xcf,0xff,0xff,0xff,0xfc,0xbf,0xff,0x1c,0xbf,0xff,0xff,0xff,0xfc,0xbf,0xff,0xcb,0xff,0xff,0xff,0xff,0xff,0xcf,0xf1,0xcb,0xff,0xff,0xcf,0xff,0xff,0xcf,0xff,0x1c,0xbf,0xff,0xfc,0xfc,0xff,0xff,0xff,0xff,0xff,0xff,0xcf,0xcb,0xcf,0xfc,0xfc,0xff,0xcf,0xfc,0x6c,0xfc,0xff,0xcb,0xcf,0xfb,0xff,0xc6};
char block2[] = {0xbb,0x8b,0x88,0x88,0x88,0x8b,0xbb,0xbb,0xb8,0xb8,0x88,0x88,0x86,0x88,0xb8,0xbb,0xbb,0x88,0x28,0x88,0x88,0x8b,0x8b,0x8b,0x88,0x88,0x8c,0xcb,0x88,0x88,0xb8,0xbb,0xb8,0xb8,0x88,0x8c,0xb8,0x88,0x88,0x88,0x8b,0x8b,0x88,0x8c,0xb8,0xcc,0xc8,0x88,0xb8,0xb8,0x88,0x88,0xcb,0xbb,0xb8,0x88,0x88,0x88,0x88,0x88,0xcb,0x88,0x88,0x88,0x88,0xcb,0x88,0x88,0x8c,0xb8,0x88,0x88,0x88,0x8c,0xb8,0x88,0x8c,0xb8,0x8c,0xb8,0x86,0x88,0xcb,0x88,0x8c,0xb8,0x8c,0xb8,0x88,0x88,0xcb,0x88,0x28,0x8e,0x8c,0xb8,0x88,0x8c,0xb8,0x88,0x88,0x88,0x8c,0xb8,0xb8,0x8b,0x88,0x88,0xb8,0xb8,0xcb,0x88,0xb8,0x88,0xb8,0x8b,0x8b,0x88,0xb8,0x88,0xbb,0xb8,0x88,0xb8,0xb8,0xb8,0x88,0x8b};
char block3[] = {0x0,0x0,0xd0,0xd0,0x10,0x0,0x0,0x0,0x0,0x0,0xdd,0x9d,0x1,0x0,0x0,0x0,0x0,0x0,0xd2,0xdd,0x0,0x10,0x0,0x0,0x0,0xd,0xdd,0xd9,0x0,0x1,0x0,0x0,0x0,0x0,0xdd,0xdd,0x0,0x0,0x10,0x90,0x0,0x0,0x10,0xd,0x0,0x0,0x9,0x0,0x0,0x0,0x0,0x0,0xd0,0x0,0x95,0x90,0x9,0x66,0x66,0xc,0xc5,0x5,0x50,0x9,0x9,0x6b,0xdd,0xdd,0xdd,0x50,0x0,0x0,0x9,0x6d,0xb6,0xd,0xd9,0x50,0x0,0x0,0x9,0x66,0x66,0xdd,0xcd,0x50,0x0,0x0,0x9,0x66,0x6d,0xcc,0xdd,0x50,0x0,0x0,0x0,0x96,0x6d,0xdd,0x95,0x55,0x0,0x0,0x0,0x9,0x0,0xdd,0xd0,0x95,0x0,0x0,0x0,0x0,0x9,0xd0,0x0,0x5,0x0,0x0,0x0,0x0,0xdd,0x0,0x0,0x55,0x0,0x0};
char block4[] = {0x0,0x0,0xd,0xd,0x0,0x0,0x0,0x0,0x0,0x0,0xdd,0x9d,0x0,0x0,0x0,0x0,0x0,0x0,0xd2,0xdd,0x0,0x0,0xb0,0x0,0x0,0xd,0xdd,0xd9,0x0,0xb,0x0,0xb,0x0,0x0,0xdd,0xdd,0x0,0xb,0x0,0xb0,0x9,0x66,0x16,0xd,0x0,0x0,0xb,0x0,0x9,0x66,0xb6,0x0,0xd0,0x0,0x0,0x0,0x9,0x6b,0xd6,0xc,0xc5,0x0,0x0,0x0,0x9,0x66,0x6d,0xdd,0xdd,0x55,0x0,0x0,0x9,0x66,0x66,0xd,0xd9,0x50,0x50,0x0,0x9,0x66,0x66,0xdb,0xcd,0xd0,0x5,0x0,0x11,0x11,0x11,0x1b,0xb5,0x55,0xc5,0x0,0x0,0x9,0xd,0xdb,0x9d,0xd0,0x0,0x0,0x0,0x0,0x0,0xdd,0xd0,0xd,0x0,0x0,0x0,0x0,0x0,0xd0,0x0,0x0,0xd0,0x0,0x0,0x0,0xd,0xd0,0x0,0xd,0xd0,0x0};
int blocks[] = {block1, block2, block3, block4};

//7x13
char light1[] = {0x0,0xb0,0xb0,0x0,0xb,0xb,0xb,0x0,0xb0,0xbf,0xb0,0xb0,0xb,0xff,0xfb,0x0,0xb0,0xfa,0xf0,0xb0,0xf,0xa7,0xaf,0x0,0xf1,0x77,0x71,0xf0,0xf,0x88,0x8f,0x0,0xb0,0x48,0x40,0xb0,0xb,0x8,0xb,0x0,0x0,0x8,0x0,0x0,0x0,0x8,0x0,0x0,0x0,0x8,0x0,0x0};
char light2[] = {0x0,0xf0,0xf0,0x0,0xf,0xf,0xf,0x0,0xf0,0xf1,0xf0,0xf0,0xf,0x1a,0x1f,0x0,0xf0,0xa7,0xa0,0xf0,0x1,0x77,0x71,0x0,0xfa,0x77,0x7a,0xf0,0x1,0x88,0x81,0x0,0xf0,0x48,0x40,0xf0,0xf,0x8,0xf,0x0,0x0,0x8,0x0,0x0,0x0,0x8,0x0,0x0,0x0,0x8,0x0,0x0};
int light[] = {light1, light2};

//5x7
char help_a[] = {0x6,0x66,0x66,0x0,0x66,0xa2,0x26,0x60,0x6a,0x66,0x62,0x60,0x6a,0x66,0x62,0x60,0x6a,0x66,0x62,0x60,0x6a,0xa2,0x22,0x60,0x6a,0x66,0x62,0x60,0x6a,0x66,0x62,0x60,0x6,0x66,0x66,0x0};
//16x7
char help_b[] = {0x0,0x20,0x0,0xa,0x0,0xa,0xa2,0x20,0x0,0x20,0x0,0xa2,0x20,0xa,0x0,0x2,0x0,0x20,0xa,0x22,0x22,0xa,0x0,0x2,0x0,0x20,0x0,0x2,0x0,0xa,0xa2,0x20,0xa2,0x22,0x20,0x2,0x0,0xa,0x0,0x2,0xa,0x22,0x0,0x2,0x0,0xa,0x0,0x2,0x0,0xa0,0x0,0x2,0x0,0xa,0xa2,0x20};

//5x5
char cursor[] = {0x77,0x0,0x0,0xaa,0x77,0x0,0x7a,0xaa,0x70,0xaa,0x77,0x0,0x77,0x0,0x0};
char clear_cursor[] = {0xbb,0xb0,0x0,0xbb,0xbb,0x0,0xbb,0xbb,0xb0,0xbb,0xbb,0x0,0xbb,0xb0,0x0};

//8x8 icon
char icon11[] = {0x0,0xb,0xc0,0x0,0xc,0xcc,0xff,0xf0,0xc0,0xb,0xc0,0xf,0x0,0xb,0xc0,0x0,0x0,0xb,0xc0,0x0,0x0,0xb,0xc0,0x0,0x0,0xb,0xc0,0x0,0x0,0xb,0xc0,0x0};
char icon12[] = {0x0,0x9,0xc0,0x0,0x8,0x88,0x77,0x70,0x80,0x9,0xc0,0x7,0x0,0x9,0xc0,0x0,0x0,0x9,0xc0,0x0,0x0,0x9,0xc0,0x0,0x0,0x9,0xc0,0x0,0x0,0x9,0xc0,0x0};
char icon21[] = {0xfc,0xcc,0xcc,0xcf,0x44,0x4c,0xc4,0x44,0xfb,0xb4,0x4b,0xbf,0xfb,0xbb,0xbb,0xbf,0xcc,0xcc,0xcc,0xcc,0xcf,0xfc,0xcf,0xfc,0xcf,0xff,0xff,0xfc,0xcc,0xcc,0xcc,0xcc};
char icon22[] = {0xf8,0x88,0x88,0x8f,0x77,0x7c,0xc7,0x77,0x29,0x77,0x77,0x92,0xa6,0x66,0x66,0x6a,0x77,0x77,0x77,0x77,0x78,0x87,0x78,0x8a,0x78,0x88,0x88,0x87,0x7a,0x77,0x7c,0x77};
char icon31[] = {0x0,0xcc,0xcc,0x0,0x0,0xc0,0xc,0x0,0x0,0xc,0xc0,0x0,0x0,0xcc,0xcc,0x0,0x0,0xcc,0xcc,0x0,0xc0,0xcc,0xcc,0xc,0xc,0xcc,0xcc,0xc0,0x0,0xc,0xc0,0x0};
char icon32[] = {0x0,0x99,0x99,0x0,0x0,0x90,0x9,0x0,0x0,0x9,0x90,0x0,0x0,0x9c,0xcb,0x0,0x0,0x1f,0xfc,0x0,0x70,0x9c,0xcb,0x7,0x7,0x79,0xc7,0x70,0x0,0x9,0x70,0x0};
char icon41[] = {0x0,0xc,0x0,0x0,0x0,0xf0,0xc0,0x0,0xf,0x0,0xc,0x0,0xb0,0x0,0xc,0x0,0xbb,0xbb,0xb4,0xbb,0xbf,0x0,0xc,0x0,0x0,0xf0,0xc0,0x0,0x0,0xc,0x0,0x0};
char icon42[] = {0x0,0x8,0x0,0x0,0x0,0x70,0x80,0x0,0x7,0x0,0x8,0x0,0x90,0x0,0x8,0x0,0x66,0x66,0x69,0x62,0x37,0x0,0x8,0x0,0x0,0x70,0x80,0x0,0x0,0x8,0x0,0x0};
int icons1[] = {icon11,icon21,icon31,icon41};
int icons2[] = {icon12,icon22,icon32,icon42};

char key, lastkey, i, cadr, typeblock;
int position, coins, add_coins, live;
int add_pickaxe, add_chest, add_hammer, sub_health, archer_cost;
int pickaxe_cost, chest_cost, hammer_cost;

void nextblock();

void nextcadr(){
	if(gettimer(0) == 0){
		cadr = 1 - cadr;
		getsprite(2,dwarf2[cadr]);
		getsprite(3,dwarf3[cadr]);
		if(typeblock == 2)
			getsprite(0,blocks[typeblock + cadr]);
		settimer(0,100);
	}
	if(gettimer(2) == 0){
		gotoxy(16,8);
		puts("      ");
		settimer(2,400);
		if(typeblock == 2){
			if(coins > add_pickaxe)
				add_coins -= add_pickaxe;
			else
				coins = 0;
			if(sub_health > 0)
				live -= sub_health;
			if(live <= 0)
				nextblock();
			}
		}
	}
}

void addcoin(){
	if(gettimer(1) == 0){
		add_coins += add_chest + add_hammer;
		settimer(1,3000);
	}
}

void init(){
	clearscreen();
	typeblock = 0;
	live = 50;
	coins = 0;
	position = 0;
	pickaxe_cost = 20;
	chest_cost = 30;
	hammer_cost = 40;
	archer_cost = 120;
	add_pickaxe = 1;
	add_chest = 0;
	add_hammer = 0;
	sub_health = 0;
	getsprite(0,blocks[0]);
	spritesetvalue(0, S_WIDTH,16);
	spritesetvalue(0, S_HEIGHT,16);
	putsprite(0,112,94);
	getsprite(1,dwarf11);
	spritesetvalue(1, S_WIDTH,14);
	spritesetvalue(1, S_HEIGHT,16);
	putsprite(1,98,94);
	spritesetvalue(2, S_WIDTH,14);
	spritesetvalue(2, S_HEIGHT,16);
	putsprite(2,152,94);
	spritesetvalue(3, S_WIDTH,14);
	spritesetvalue(3, S_HEIGHT,16);
	putsprite(3,176,94);
	for(i = 0; i < 16; i++){
		putimagerle(earth1,16 * i, 110,16,16);
		putimagerle(earth2,16 * i, 74,16,16);
	}
	putimage(help_a, 118, 114, 7, 9);
	putimage(help_b, 14, 0, 16, 7);
	setparticle(1, 10, 1000);
	setemitter(10, 180, 250, 5);
}

void win(){
	clearscreen();
	setimagesize(6);
	spritesetvalue(0, S_LIVES, 0);
	spritesetvalue(1, S_LIVES, 0);
	spritesetvalue(2, S_LIVES, 0);
	spritesetvalue(3, S_LIVES, 0);
	gotoxy(7,2);
	puts("you win!");
	putimage(castle, 20, 32, 16, 16);
	setimagesize(1);
	//delay 3 sec
	for(i = 0; i < 60; i++)
		delayredraw();
	while(getkey() == 0){}
	while(getkey() != 0){}
	init();
}

void drawmenu(){
	if(coins < pickaxe_cost)
		putimage(icons1[0], 8, 15, 8, 8);
	else
		putimage(icons2[0], 8, 15, 8, 8);
	if(coins < chest_cost)
		putimage(icons1[1], 8, 31, 8, 8);
	else
		putimage(icons2[1], 8, 31, 8, 8);
	if(coins < hammer_cost)
		putimage(icons1[2], 8, 47, 8, 8);
	else
		putimage(icons2[2], 8, 47, 8, 8);
	if(coins < archer_cost)
		putimage(icons1[3], 8, 63, 8, 8);
	else
		putimage(icons2[3], 8, 63, 8, 8);
	putimage(cursor, 1, 18 + position * 16, 5, 5);
	gotoxy(4,2);
	putn(pickaxe_cost);
	gotoxy(4,4);
	putn(chest_cost);
	gotoxy(4,6);
	putn(hammer_cost);
	gotoxy(4,8);
	putn(archer_cost);
	gotoxy(12,2);
	putn(add_pickaxe);
	gotoxy(12,4);
	putn(add_chest);
	gotoxy(12,6);
	putn(add_hammer);
	gotoxy(12,8);
	putn(sub_health);
	gotoxy(10,0);
	printf("           ");//clear string
	gotoxy(10,0);
	printf("%d G", coins);
}

void nextblock(){
	typeblock = random(2);
	getsprite(0,blocks[typeblock]);
	if(typeblock == 2)
		live = 40;
	else
		live = 50;
}

void keyevents(){
	key = getkey();
	if(key == KEY_A){
		getsprite(1,dwarf12);
		if(key != lastkey){
			drawparticle(115, 90, 6 + random(4));
			add_coins += add_pickaxe;
			live--;
			if(live <= 0)
				nextblock();
			}
		}
	else
		getsprite(1,dwarf11);
	if(key == KEY_DOWN && key != lastkey){
		putimage(clear_cursor, 1, 18 + position * 16, 5, 5);
		position++;
		if(position > 3)
			position = 0;
	}
	else if(key == KEY_UP && key != lastkey){
		putimage(clear_cursor, 1, 18 + position * 16, 5, 5);
		position--;
		if(position < 0)
			position = 3;
	}
	if(key == KEY_B){
		if(position == 0 && coins >= pickaxe_cost){
			coins -= pickaxe_cost;
			if(pickaxe_cost < 20000)
				pickaxe_cost *= 2;
			add_pickaxe++;
		}
		if(position == 1 && coins >= chest_cost){
			coins -= chest_cost;
			if(chest_cost < 30000)
				chest_cost *= 2;
			add_chest++;
			putimage(chestim,28, 94,14,16);
		}
		if(position == 2 && coins >= hammer_cost){
			coins -= hammer_cost;
			if(hammer_cost < 20000)
				hammer_cost *= 2;
			add_hammer+=2;
			putsprite(2,52,94);
		}
		if(position == 3 && coins >= archer_cost){
			coins -= archer_cost;
			if(archer_cost < 20000)
				archer_cost *= 2;
			sub_health++;
			putsprite(3,76,94);
		}
	}
	lastkey = key;
}

void main(){
	init();
	while(1){
		keyevents();
		drawmenu();
		nextcadr();
		addcoin();
		putimage(light[cadr],6, 94,7,13);
		if(add_coins != 0){
			gotoxy(16,8);
			if(add_coins > 0)
				putchar('+');
			printf("%d  ",add_coins);
		}
		coins += add_coins;
		add_coins = 0;
		delayredraw();
		if(coins > 32000)
			win();
	}
}
					