//16x16rle
char water1[] = {0x8,0x33,0x89,0x1e,0xe1,0x11,0xee,0xe1,0x11,0xee,0xe1,0x10,0x33,0x2,0x11,0x2,0xee,0x2,0x11,0x2,0xee,0x18,0x33,0x2,0xee,0x3,0x11,0x82,0x1e,0x2,0xee,0x20,0x33,0x4,0xee,0x4,0x11,0x10,0x33};
char water3[] = {0x22,0x33,0x82,0x32,0x7,0x33,0x2,0x23,0x82,0x33,0x2,0x23,0x2,0x33,0x7,0x32,0x8,0x23,0x3,0x32,0x3,0x22,0x2,0x32,0x6,0x23,0x83,0x22,0x23,0x2,0x32,0x4,0x22,0x82,0x23,0x3,0x22,0x2,0x32,0x83,0x22,0x32,0xa,0x22,0x8,0x66,0x89,0x1e,0xe1,0x1e,0xe1,0x1e,0xe1,0x1e,0xe1,0x8,0x33};
char ground2[] = {0xc,0x33,0x2,0x53,0x4,0x33,0x82,0x53,0x3,0x35,0x3,0x33,0x2,0x35,0x4,0x53,0x2,0x33,0x2,0x53,0x82,0x95,0x3,0x35,0x84,0x33,0x35,0x39,0x5,0x55,0x2,0x53,0x4,0x55,0x82,0x59,0x2,0x55,0x84,0xd5,0x55,0x59,0x3,0x55,0x85,0x59,0x55,0xdd,0x5d,0x2,0x55,0x82,0x59,0x2,0x55,0x82,0x5d,0x2,0xdd,0x2,0xd5,0x3,0x55,0x83,0xdd,0xdc,0x3,0xdd,0x2,0x55,0x83,0x5d,0xdc,0x3,0xdd,0x86,0xdc,0xd5,0x55,0xdd,0xcd,0x2,0xdd,0x82,0xcc,0x2,0xdd,0x82,0x55,0x2,0xdd,0x8,0x99,0x2,0xcc,0x82,0x8c,0x2,0xcc,0x82,0x8c,0x2,0xcc,0x2,0x88,0x82,0x87,0x5,0x88};
char water4[] = {0x23,0x33,0x84,0x23,0x32,0x23,0x6,0x33,0x83,0x23,0x22,0x2,0x33,0x2,0x23,0x4,0x32,0x82,0x23,0x3,0x32,0x3,0x23,0x82,0x22,0x2,0x32,0x2,0x23,0x4,0x32,0x2,0x23,0x83,0x22,0x32,0x2,0x22,0x82,0x23,0x3,0x22,0x82,0x23,0x4,0x22,0x83,0x32,0x23,0x4,0x22,0x82,0x32,0x2,0x22,0x2,0x32,0x2,0x22,0x2,0x23,0x2,0x22,0x83,0x23,0x22,0x8,0x66,0x83,0xe3,0x13,0x2,0x33,0x83,0xe3,0x13,0x2,0x33,0x88,0xe3,0x13,0xe3,0x13,0xe3,0x13,0x3e,0x13};
	//16x16
char water2[] = {0x33,0x33,0x33,0x33,0x33,0x33,0x33,0x33,0x13,0x33,0x33,0x13,0x33,0x33,0x13,0x33,0x31,0x33,0x31,0x31,0x33,0x31,0x31,0x33,0x33,0x13,0x13,0x33,0x13,0x13,0x33,0x13,0x33,0x31,0x33,0x33,0x31,0x33,0x33,0x31,0xe3,0x33,0x33,0xe3,0x33,0x33,0xe3,0x33,0x3e,0x33,0x3e,0x3e,0x33,0x3e,0x3e,0x33,0x33,0xe3,0xe3,0x33,0xe3,0xe3,0x33,0xe3,0x13,0x3e,0x33,0x13,0x3e,0x33,0x13,0x3e,0x31,0x33,0x31,0x31,0x33,0x31,0x31,0x33,0x33,0x13,0x13,0x33,0x13,0x13,0x33,0x13,0x33,0x31,0x33,0x33,0x31,0x33,0x33,0x31,0xe3,0x33,0x33,0xe3,0x33,0x33,0xe3,0x33,0x3e,0x33,0x3e,0x3e,0x33,0x3e,0x3e,0x33,0x33,0xe3,0xe3,0x33,0xe3,0xe3,0x33,0xe3,0x33,0x3e,0x33,0x33,0x3e,0x33,0x33,0x3e};
char ground1[] = {0x88,0x88,0x88,0x88,0x88,0x8c,0x88,0x88,0x88,0x88,0x88,0x8c,0x88,0xca,0x78,0x88,0xc8,0x88,0x88,0xca,0x78,0x87,0x88,0x88,0xa7,0x8c,0x88,0x87,0x88,0x88,0x8c,0xcc,0x78,0xca,0x78,0x88,0x88,0x88,0xca,0xa7,0x88,0x87,0x88,0x88,0xcc,0x88,0xca,0xa7,0x88,0x88,0x88,0x8c,0xaa,0x78,0x87,0x78,0x88,0x88,0x88,0x8c,0xaa,0x78,0x88,0x88,0xc8,0x88,0x88,0x88,0x77,0x88,0x88,0x88,0xa7,0xcc,0xc8,0x88,0x88,0x8c,0xc8,0x8c,0x7c,0xaa,0xa7,0x88,0x88,0xca,0xa7,0x88,0x8c,0xaa,0xa7,0x88,0x88,0xca,0xa7,0x88,0x8c,0xaa,0xa7,0x8c,0xc8,0x87,0x78,0x8c,0x78,0x77,0x78,0xca,0xa7,0x88,0x88,0xca,0x88,0x88,0x88,0xca,0xa7,0x88,0x88,0x87,0x88,0x88,0x88,0x87,0x77,0x88,0x88,0x88};
char ship[] = {0x0,0x0,0x0,0x60,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x6f,0x0,0x0,0x0,0x0,0x0,0x0,0x1,0x61,0xf0,0x0,0x0,0x0,0x0,0x0,0x1,0x91,0x1f,0x0,0x0,0x0,0x0,0x0,0x1f,0x6c,0x11,0xf0,0x0,0x0,0x0,0x0,0x11,0x91,0xc1,0xf0,0x0,0x0,0x0,0x1,0x1f,0x6c,0x1c,0x1f,0x0,0x0,0x0,0x1,0xf1,0x91,0xc1,0x11,0xf0,0x0,0x0,0x9f,0x9f,0x6c,0x9c,0x99,0x90,0x0,0x0,0x0,0x0,0x60,0x0,0x0,0x0,0x0,0x69,0x69,0x69,0x66,0x66,0x66,0x26,0x66,0x6,0xc1,0xc1,0xbc,0x11,0x12,0x12,0x1f,0x0,0x6c,0xbc,0xb1,0xb1,0x11,0x21,0xf0,0x0,0x6,0x1b,0xbb,0x11,0x11,0x1f,0x0,0x0,0x0,0xc1,0xc1,0xc1,0x11,0xf0,0x0,0x0,0x0,0xcc,0x1c,0x11,0x11,0xf0,0x0};
//16x12
char bottle[] = {0x0,0x0,0x0,0x0,0x0,0x0,0x8,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0xa8,0x80,0x0,0x0,0x0,0x0,0x0,0x5,0x9a,0x88,0x0,0x0,0x0,0x0,0x0,0x59,0xcd,0xa0,0x0,0x0,0x0,0x5,0x55,0x9c,0xd5,0x0,0x0,0x0,0x0,0x59,0x99,0xcd,0x50,0x0,0x0,0x0,0x5,0x99,0x9c,0xdd,0x50,0x0,0x0,0x0,0x59,0x9c,0xcc,0xdd,0x50,0x0,0x0,0x5,0x99,0xcc,0xcd,0xdd,0x50,0x0,0x0,0x59,0x9c,0xcc,0xcd,0xd5,0x0,0x0,0x5,0x99,0x9c,0xcc,0xdd,0x50,0x0,0x0,0x59,0x99,0xcc,0xcc,0xd5,0x0,0x0,0x0};
//8x14
char we[] = {0xa,0xaa,0xaa,0x0,0xa7,0x77,0x77,0xa0,0xa7,0x77,0x77,0xa0,0xa7,0x7a,0xaa,0x0,0xa7,0x7a,0x0,0x0,0xa7,0x7a,0xaa,0x0,0xa7,0x77,0x77,0xa0,0xa7,0x77,0x77,0xa0,0xa7,0x7a,0xaa,0x0,0xa7,0x7a,0x0,0x0,0xa7,0x7a,0xaa,0x0,0xa7,0x77,0x77,0xa0,0xa7,0x77,0x77,0xa0,0xa,0xaa,0xaa,0x0};
char ws[] = {0xa,0xaa,0xaa,0x0,0xad,0xdd,0xdd,0xa0,0xad,0xdd,0xdd,0xa0,0xad,0xda,0xaa,0x0,0xad,0xda,0x0,0x0,0xad,0xdd,0xa0,0x0,0xad,0xdd,0xda,0x0,0xa,0xdd,0xdd,0xa0,0x0,0xad,0xdd,0xa0,0x0,0xa,0xdd,0xa0,0xa,0xaa,0xdd,0xa0,0xad,0xdd,0xdd,0xa0,0xad,0xdd,0xdd,0xa0,0xa,0xaa,0xaa,0x0};
char wp[] = {0xa,0xaa,0xaa,0x0,0xa2,0x22,0x22,0xa0,0xa2,0x22,0x22,0xa0,0xa2,0x2a,0xa2,0xa0,0xa2,0x2a,0xa2,0xa0,0xa2,0x22,0x22,0xa0,0xa2,0x22,0x22,0xa0,0xa2,0x2a,0xaa,0x0,0xa2,0x2a,0x0,0x0,0xa2,0x2a,0x0,0x0,0xa2,0x2a,0x0,0x0,0xa2,0x2a,0x0,0x0,0xa2,0x2a,0x0,0x0,0xa,0xa0,0x0,0x0};
char w8[] = {0xa,0xaa,0xaa,0xa0,0xa6,0x66,0x66,0x6a,0xa6,0x66,0x66,0x6a,0xa6,0x6a,0xa6,0x6a,0xa6,0x6a,0xa6,0x6a,0xa6,0x6a,0xa6,0x6a,0xa6,0x66,0x66,0x6a,0xa6,0x6a,0xa6,0x6a,0xa6,0x6a,0xa6,0x6a,0xa6,0x6a,0xa6,0x6a,0xa6,0x6a,0xa6,0x6a,0xa6,0x66,0x66,0x6a,0xa6,0x66,0x66,0x6a,0xa,0xaa,0xaa,0xa0};
char w2[] = {0xa,0xaa,0xaa,0x0,0xaf,0xff,0xff,0xa0,0xaf,0xff,0xff,0xa0,0xaa,0xaa,0xff,0xa0,0xaa,0xaa,0xff,0xa0,0xaf,0xff,0xff,0xa0,0xaf,0xff,0xff,0xa0,0xaf,0xfa,0xaa,0x0,0xaf,0xfa,0x0,0x0,0xaf,0xfa,0x0,0x0,0xaf,0xfa,0xaa,0x0,0xaf,0xff,0xff,0xa0,0xaf,0xff,0xff,0xa0,0xa,0xaa,0xaa,0x0};
char w6[] = {0xa,0xaa,0xaa,0xa0,0xae,0xee,0xee,0xea,0xae,0xee,0xee,0xea,0xae,0xea,0xaa,0xa0,0xae,0xea,0xa0,0x0,0xae,0xea,0xaa,0xa0,0xae,0xee,0xee,0xea,0xae,0xea,0xae,0xea,0xae,0xea,0xae,0xea,0xae,0xea,0xae,0xea,0xae,0xea,0xae,0xea,0xae,0xee,0xee,0xea,0xae,0xee,0xee,0xea,0xa,0xaa,0xaa,0xa0};

int tx[] = {0,4,8,11,14,17,19,21,23,25,26,27,28,28,28,27,26,25,23,21,19,17,14,11,8,4,0,-4,-8,-11,-14,-17,-19,-21,-23,-25,-26,-27,-28,-28,-28,-27,-26,-25,-23,-21,-19,-17,-14,-11,-8,-4,0,0}

int i,dir,y,x;

int getx(int p){
	p = p % 53;
	return tx[p];
}

void cadr(){
	if(gettimer(0) == 0){
		settimer(1, 300);
		settimer(0, 600);
		setpallette(14, 0xE718);
		setpallette(1, 0x7DB6);
		spritesetvalue(1,S_HEIGHT,12);
		putimagerle(water3, x + 32, 12, 16, 16);
		putimagerle(water4, x + 48, 12, 16, 16);
		putsprite(1, 104, 96);	
	}
	if(gettimer(1) == 0){
		settimer(1, 600)
		settimer(0, 300);
		delayredraw();
		setpallette(1, 0xE718);
		setpallette(14, 0x7DB6);
		spritesetvalue(1,S_HEIGHT,9);
		putimagerle(water4, x + 32, 12, 16, 16);
		putimagerle(water3, x + 48, 12, 16, 16);
		putsprite(1, 104, 99);	
	}
	if(gettimer(3) == 0){
		settimer(3, 100);
		if(dir){
			scroll(2);
			x -= 2;
		}
		else{
			scroll(0);
			x += 2;
		}
		if(x > 40)
			dir = 1;
		if(x < -20)
			dir = 0;
	}
}

void main(){
	dir = 0;
	y = 260;
	x = 0;
	setbgcolor(3);
	clearscreen();
	getsprite(0,ship);
	putsprite(0, 56, 70);
	spritesetvalue(0,S_WIDTH,16);
	spritesetvalue(0,S_HEIGHT,16);
	getsprite(0,ship);
	putsprite(0, 56, 50);
	getsprite(1,bottle);
	putsprite(1, 56, 70);
	spritesetvalue(1,S_WIDTH,16);
	spritesetvalue(1,S_HEIGHT,12);
	spritesetvalue(1,S_IS_SCROLLED,0);
	putsprite(1, 104, 90);
	getsprite(2,we);
	getsprite(3,ws);
	getsprite(4,wp);
	getsprite(5,w8);
	getsprite(6,w2);
	getsprite(7,w6);
	getsprite(8,w6);
	for(i = 2; i < 9; i++){ 
		spritesetvalue(i,S_WIDTH,8);
		spritesetvalue(i,S_HEIGHT,14);
		spritesetvalue(i,S_IS_SCROLLED,0);
	}
	setpallette(14, 0x3DF9);
	setpallette(2, 0xE718);
	for(i = 0; i < 8; i++){
		putimagerle(water1, i * 16, 60, 16, 16);
		putimagerle(ground2, i * 16, 12, 16, 16);
		putimage(ground1, i * 16, 28, 16, 16);
		putimage(ground1, i * 16, 44, 16, 16);
	}
	putimagerle(water3, 32, 12, 16, 16);
	putimagerle(water4, 48, 12, 16, 16);
	putimage(water2, 32, 44, 16, 16);
	putimage(water2, 48, 44, 16, 16);
	putimage(water2, 32, 28, 16, 16);
	putimage(water2, 48, 28, 16, 16);
	setimagesize(2);
	for(i = 0; i < 4; i++)
		putimagerle(water1, i * 32, 76, 16, 16);
	setimagesize(1);
	while(1){
		cadr();
		y--;
		for(i = 2; i < 9; i++){
			putsprite(i, 56 + getx(y + i), y + i * 20 - 160);
		}
		spritesetvalue(0,S_ANGLE,getx(y % 20) / 2);
		if(y < 1)
			y = 260;
		settimer(4, 16);
		while(gettimer(4)){}
	}
}
